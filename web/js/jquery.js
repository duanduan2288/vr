var msBeautify=msBeautify||{};!function($){function dd(element,settings){var settings=$.extend(!0,{byJson:{data:null,selectedIndex:0,name:null,size:0,multiple:!1,width:250},mainCSS:"dd",height:120,visibleRows:7,rowHeight:0,showIcon:!0,zIndex:9999,useSprite:!1,animStyle:"slideDown",event:"click",openDirection:"alwaysDown",jsonTitle:!0,style:"",disabledOpacity:.7,disabledOptionEvents:!0,childWidth:0,enableCheckbox:!1,checkboxNameSuffix:"_mscheck",append:"",prepend:"",reverseMode:!0,roundedCorner:!0,enableAutoFilter:!0,on:{create:null,open:null,close:null,add:null,remove:null,change:null,blur:null,click:null,dblclick:null,mousemove:null,mouseover:null,mouseout:null,focus:null,mousedown:null,mouseup:null}},settings),$this=this,holderId={postElementHolder:"_msddHolder",postID:"_msdd",postTitleID:"_title",postTitleTextID:"_titleText",postChildID:"_child"},css={dd:settings.mainCSS,ddTitle:"ddTitle",arrow:"ddArrow arrowoff",ddChild:"ddChild",ddTitleText:"ddTitleText",disabled:"disabled",enabled:"enabled",ddOutOfVision:"ddOutOfVision",borderTop:"borderTop",noBorderTop:"noBorderTop",selected:"selected",divider:"divider",optgroup:"optgroup",optgroupTitle:"optgroupTitle",description:"description",label:"ddlabel",hover:"hover",disabledAll:"disabledAll"},css_i={li:"_msddli_",borderRadiusTp:"borderRadiusTp",ddChildMore:"border shadow",fnone:"fnone"},isList=!1,isMultiple=!1,isDisabled=!1,cacheElement={},element,orginial={},isOpen=!1,DOWN_ARROW=40,UP_ARROW=38,LEFT_ARROW=37,RIGHT_ARROW=39,ESCAPE=27,ENTER=13,ALPHABETS_START=47,SHIFT=16,CONTROL=17,BACKSPACE=8,DELETE=46,shiftHolded=!1,controlHolded=!1,lastTarget=null,forcedTrigger=!1,oldSelected,isCreated=!1,doc=document,ua=window.navigator.userAgent,isIE=ua.match(/msie/i);settings.reverseMode=settings.reverseMode.toString(),settings.roundedCorner=settings.roundedCorner.toString();var isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)?!0:!1},msieversion=function(){var e=ua.indexOf("MSIE");return e>0?parseInt(ua.substring(e+5,ua.indexOf(".",e))):0},checkDataSetting=function(){settings.mainCSS=$("#"+element).data("maincss")||settings.mainCSS,settings.visibleRows=$("#"+element).data("visiblerows")||settings.visibleRows,0==$("#"+element).data("showicon")&&(settings.showIcon=$("#"+element).data("showicon")),settings.useSprite=$("#"+element).data("usesprite")||settings.useSprite,settings.animStyle=$("#"+element).data("animstyle")||settings.animStyle,settings.event=$("#"+element).data("event")||settings.event,settings.openDirection=$("#"+element).data("opendirection")||settings.openDirection,settings.jsonTitle=$("#"+element).data("jsontitle")||settings.jsonTitle,settings.disabledOpacity=$("#"+element).data("disabledopacity")||settings.disabledOpacity,settings.childWidth=$("#"+element).data("childwidth")||settings.childWidth,settings.enableCheckbox=$("#"+element).data("enablecheckbox")||settings.enableCheckbox,settings.checkboxNameSuffix=$("#"+element).data("checkboxnamesuffix")||settings.checkboxNameSuffix,settings.append=$("#"+element).data("append")||settings.append,settings.prepend=$("#"+element).data("prepend")||settings.prepend,settings.reverseMode=$("#"+element).data("reversemode")||settings.reverseMode,settings.roundedCorner=$("#"+element).data("roundedcorner")||settings.roundedCorner,settings.enableAutoFilter=$("#"+element).data("enableautofilter")||settings.enableAutoFilter,settings.reverseMode=settings.reverseMode.toString(),settings.roundedCorner=settings.roundedCorner.toString(),settings.enableAutoFilter=settings.enableAutoFilter.toString()},getElement=function(e){return void 0===cacheElement[e]&&(cacheElement[e]=doc.getElementById(e)),cacheElement[e]},getIndex=function(e){var t=getPostID("postChildID");return $("#"+t+" li."+css_i.li).index(e)},createByJson=function(){if(settings.byJson.data){var validData=["description","image","title"];try{element.id||(element.id="dropdown"+msBeautify.counter),settings.byJson.data=eval(settings.byJson.data);var id="msdropdown"+msBeautify.counter++,obj={};obj.id=id,obj.name=settings.byJson.name||element.id,settings.byJson.size>0&&(obj.size=settings.byJson.size),obj.multiple=settings.byJson.multiple;for(var oSelect=createElement("select",obj),i=0;i<settings.byJson.data.length;i++){var current=settings.byJson.data[i],opt=new Option(current.text,current.value);for(var p in current)if("text"!=p.toLowerCase()){var key=-1!=$.inArray(p.toLowerCase(),validData)?"data-":"";opt.setAttribute(key+p,current[p])}oSelect.options[i]=opt}getElement(element.id).appendChild(oSelect),oSelect.selectedIndex=settings.byJson.selectedIndex,$(oSelect).css({width:settings.byJson.width+"px"}),element=oSelect}catch(e){throw"There is an error in json data."}}},init=function(){createByJson(),element.id||(element.id="msdrpdd"+msBeautify.counter++),element=element.id,$this.element=element,checkDataSetting(),isDisabled=getElement(element).disabled;var e=settings.enableCheckbox;"true"===e.toString()&&(getElement(element).multiple=!0,settings.enableCheckbox=!0),isList=getElement(element).size>1||1==getElement(element).multiple?!0:!1,isList&&(isMultiple=getElement(element).multiple),mergeAllProp(),createLayout(),updateProp("uiData",getDataAndUI()),updateProp("selectedOptions",$("#"+element+" option:selected"));var t=getPostID("postChildID");oldSelected=$("#"+t+" li."+css.selected),"true"===settings.reverseMode&&$("#"+element).on("change",function(){setValue(this.selectedIndex)}),getElement(element).refresh=function(){$("#"+element).msDropdown().data("dd").refresh()}},getPostID=function(e){return element+holderId[e]},getInternalStyle=function(e){var t=void 0===e.style?"":e.style.cssText;return t},parseOption=function(opt){var imagePath="",title="",description="",value=-1,text="",className="",imagecss="",index;if(void 0!==opt){var attrTitle=opt.title||"";if(""!=attrTitle){var reg=/^\{.*\}$/,isJson=reg.test(attrTitle);if(isJson&&settings.jsonTitle)var obj=eval("["+attrTitle+"]");title=isJson&&settings.jsonTitle?obj[0].title:title,description=isJson&&settings.jsonTitle?obj[0].description:description,imagePath=isJson&&settings.jsonTitle?obj[0].image:attrTitle,imagecss=isJson&&settings.jsonTitle?obj[0].imagecss:imagecss,index=opt.index}text=opt.text||"",value=opt.value||"",className=opt.className||"",title=$(opt).prop("data-title")||$(opt).data("title")||title||"",description=$(opt).prop("data-description")||$(opt).data("description")||description||"",imagePath=$(opt).prop("data-image")||$(opt).data("image")||imagePath||"",imagecss=$(opt).prop("data-imagecss")||$(opt).data("imagecss")||imagecss||"",index=$(opt).index()}var o={image:imagePath,title:title,description:description,value:value,text:text,className:className,imagecss:imagecss,index:index};return o},createElement=function(e,t,n){var i=doc.createElement(e);if(t)for(var o in t)switch(o){case"style":i.style.cssText=t[o];break;default:i[o]=t[o]}return n&&(i.innerHTML=n),i},hideOriginal=function(){var e=getPostID("postElementHolder");if(0==$("#"+e).length){var t={style:"height: 0px;overflow: hidden;position: absolute;",className:css.ddOutOfVision};t.id=e;var n=createElement("div",t);$("#"+element).after(n),$("#"+element).appendTo($("#"+e))}else $("#"+e).css({height:0,overflow:"hidden",position:"absolute"});getElement(element).tabIndex=-1},createWrapper=function(){var e="true"==settings.roundedCorner?" borderRadius":"",t={className:css.dd+" ddcommon"+e},n=getInternalStyle(getElement(element)),i=$("#"+element).outerWidth();t.style="width: "+i+"px;",n.length>0&&(t.style=t.style+""+n),t.id=getPostID("postID"),t.tabIndex=getElement(element).tabIndex;var o=createElement("div",t);return o},createTitle=function(){var e;e=getElement(element).selectedIndex>=0?getElement(element).options[getElement(element).selectedIndex]:{value:"",text:""};var t="",n="",i=$("#"+element).data("usesprite");i&&(settings.useSprite=i),0!=settings.useSprite&&(t=" "+settings.useSprite,n=" "+e.className);var o="true"==settings.roundedCorner?" "+css_i.borderRadiusTp:"",s=createElement("div",{className:css.ddTitle+t+o}),r=createElement("span",{className:css.divider}),a=createElement("span",{className:css.arrow}),l=getPostID("postTitleID"),c=createElement("span",{className:css.ddTitleText+n,id:l}),u=parseOption(e),d=u.image,h=u.text||"";if(""!=d&&settings.showIcon){var p=createElement("img");p.src=d,""!=u.imagecss&&(p.className=u.imagecss+" ")}var f=createElement("span",{className:css.label},h);s.appendChild(r),s.appendChild(a),p&&c.appendChild(p),c.appendChild(f),s.appendChild(c);var m=createElement("span",{className:css.description},u.description);return c.appendChild(m),s},createFilterBox=function(){var e=getPostID("postTitleTextID"),t="true"==settings.roundedCorner?"borderRadius":"",n=createElement("input",{id:e,type:"text",value:"",autocomplete:"off",className:"text shadow "+t,style:"display: none"});return n},createChild=function(e){var t={},n=getInternalStyle(e);n.length>0&&(t.style=n);var i=e.disabled?css.disabled:css.enabled;i=e.selected?i+" "+css.selected:i,i=i+" "+css_i.li,t.className=i,0!=settings.useSprite&&(t.className=i+" "+e.className);var o=createElement("li",t),s=parseOption(e);""!=s.title&&(o.title=s.title);var r=s.image;if(""!=r&&settings.showIcon){var a=createElement("img");a.src=r,""!=s.imagecss&&(a.className=s.imagecss+" ")}if(""!=s.description)var l=createElement("span",{className:css.description},s.description);var c=e.text||"",u=createElement("span",{className:css.label},c);if(settings.enableCheckbox===!0){var d=createElement("input",{type:"checkbox",name:element+settings.checkboxNameSuffix+"[]",value:e.value||"",className:"checkbox"});o.appendChild(d),settings.enableCheckbox===!0&&(d.checked=e.selected?!0:!1)}a&&o.appendChild(a),o.appendChild(u),l?o.appendChild(l):a&&(a.className=a.className+css_i.fnone);var h=createElement("div",{className:"clear"});return o.appendChild(h),o},createChildren=function(){var e=getPostID("postChildID"),t={className:css.ddChild+" ddchild_ "+css_i.ddChildMore,id:e};t.style=0==isList?"z-index: "+settings.zIndex:"z-index:1";var n=$("#"+element).data("childwidth")||settings.childWidth;n&&(t.style=(t.style||"")+";width:"+n);var i=createElement("div",t),o=createElement("ul");0!=settings.useSprite&&(o.className=settings.useSprite);for(var s=getElement(element).children,r=0;r<s.length;r++){var a,l=s[r];if("optgroup"==l.nodeName.toLowerCase()){a=createElement("li",{className:css.optgroup});var c=createElement("span",{className:css.optgroupTitle},l.label);a.appendChild(c);for(var u=l.children,d=createElement("ul"),h=0;h<u.length;h++){var p=createChild(u[h]);d.appendChild(p)}a.appendChild(d)}else a=createChild(l);o.appendChild(a)}return i.appendChild(o),i},childHeight=function(e){var t=getPostID("postChildID");if(e)return-1==e?$("#"+t).css({height:"auto",overflow:"auto"}):$("#"+t).css("height",e+"px"),!1;var n,i=getElement(element).options.length;if(i>settings.visibleRows||settings.visibleRows){var o=$("#"+t+" li:first"),s=parseInt(o.css("padding-bottom"))+parseInt(o.css("padding-top"));0===settings.rowHeight&&($("#"+t).css({visibility:"hidden",display:"block"}),settings.rowHeight=Math.ceil(o.height()),$("#"+t).css({visibility:"visible"}),isList&&settings.enableCheckbox!==!0||$("#"+t).css({display:"none"})),n=(settings.rowHeight+s)*Math.min(settings.visibleRows,i)+3}else isList&&(n=$("#"+element).height());return n},applyChildEvents=function(){var e=getPostID("postChildID");$("#"+e).on("click",function(e){return isDisabled===!0?!1:(e.preventDefault(),e.stopPropagation(),isList&&bind_on_events(),void 0)}),$("#"+e+" li."+css.enabled).on("click",function(e){"input"!==e.target.nodeName.toLowerCase()&&close(this)}),$("#"+e+" li."+css.enabled).on("mousedown",function(t){if(isDisabled===!0)return!1;if(oldSelected=$("#"+e+" li."+css.selected),lastTarget=this,t.preventDefault(),t.stopPropagation(),settings.enableCheckbox===!0&&"input"===t.target.nodeName.toLowerCase()&&(controlHolded=!0),isList===!0)if(isMultiple)if(shiftHolded===!0){$(this).addClass(css.selected);var n=$("#"+e+" li."+css.selected),i=getIndex(this);if(n.length>1){var o=$("#"+e+" li."+css_i.li),s=getIndex(n[0]),r=getIndex(n[1]);i>r&&(s=i,r+=1);for(var a=Math.min(s,r);a<=Math.max(s,r);a++){var l=o[a];$(l).hasClass(css.enabled)&&$(l).addClass(css.selected)}}}else if(controlHolded===!0){if($(this).toggleClass(css.selected),settings.enableCheckbox===!0){var c=this.childNodes[0];c.checked=!c.checked}}else $("#"+e+" li."+css.selected).removeClass(css.selected),$("#"+e+" input:checkbox").prop("checked",!1),$(this).addClass(css.selected),settings.enableCheckbox===!0&&(this.childNodes[0].checked=!0);else $("#"+e+" li."+css.selected).removeClass(css.selected),$(this).addClass(css.selected);else $("#"+e+" li."+css.selected).removeClass(css.selected),$(this).addClass(css.selected)}),$("#"+e+" li."+css.enabled).on("mouseenter",function(e){return isDisabled===!0?!1:(e.preventDefault(),e.stopPropagation(),null!=lastTarget&&isMultiple&&($(this).addClass(css.selected),settings.enableCheckbox===!0&&(this.childNodes[0].checked=!0)),void 0)}),$("#"+e+" li."+css.enabled).on("mouseover",function(){return isDisabled===!0?!1:($(this).addClass(css.hover),void 0)}),$("#"+e+" li."+css.enabled).on("mouseout",function(){return isDisabled===!0?!1:($("#"+e+" li."+css.hover).removeClass(css.hover),void 0)}),$("#"+e+" li."+css.enabled).on("mouseup",function(t){if(isDisabled===!0)return!1;t.preventDefault(),t.stopPropagation(),settings.enableCheckbox===!0&&(controlHolded=!1);var n=$("#"+e+" li."+css.selected).length;forcedTrigger=oldSelected.length!=n||0==n?!0:!1,fireAfterItemClicked(),unbind_on_events(),bind_on_events(),lastTarget=null}),0==settings.disabledOptionEvents&&($("#"+e+" li."+css_i.li).on("click",function(){return isDisabled===!0?!1:(fireOptionEventIfExist(this,"click"),void 0)}),$("#"+e+" li."+css_i.li).on("mouseenter",function(){return isDisabled===!0?!1:(fireOptionEventIfExist(this,"mouseenter"),void 0)}),$("#"+e+" li."+css_i.li).on("mouseover",function(){return isDisabled===!0?!1:(fireOptionEventIfExist(this,"mouseover"),void 0)}),$("#"+e+" li."+css_i.li).on("mouseout",function(){return isDisabled===!0?!1:(fireOptionEventIfExist(this,"mouseout"),void 0)}),$("#"+e+" li."+css_i.li).on("mousedown",function(){return isDisabled===!0?!1:(fireOptionEventIfExist(this,"mousedown"),void 0)}),$("#"+e+" li."+css_i.li).on("mouseup",function(){return isDisabled===!0?!1:(fireOptionEventIfExist(this,"mouseup"),void 0)}))},removeChildEvents=function(){var e=getPostID("postChildID");$("#"+e).off("click"),$("#"+e+" li."+css.enabled).off("mouseenter"),$("#"+e+" li."+css.enabled).off("click"),$("#"+e+" li."+css.enabled).off("mouseover"),$("#"+e+" li."+css.enabled).off("mouseout"),$("#"+e+" li."+css.enabled).off("mousedown"),$("#"+e+" li."+css.enabled).off("mouseup")},triggerBypassingHandler=function(e,t,n){$("#"+e).off(t,n),$("#"+e).trigger(t),$("#"+e).on(t,n)},applyEvents=function(){{var e=getPostID("postID"),t=getPostID("postTitleTextID");getPostID("postChildID")}$("#"+e).on(settings.event,function(e){return isDisabled===!0?!1:(fireEventIfExist(settings.event),e.preventDefault(),e.stopPropagation(),open(e),void 0)}),$("#"+e).on("keydown",function(e){var t=e.which;!isOpen&&(t==ENTER||t==UP_ARROW||t==DOWN_ARROW||t==LEFT_ARROW||t==RIGHT_ARROW||t>=ALPHABETS_START&&!isList)&&(open(e),t>=ALPHABETS_START?showFilterBox():(e.preventDefault(),e.stopImmediatePropagation()))}),$("#"+e).on("focus",wrapperFocusHandler),$("#"+e).on("blur",wrapperBlurHandler),$("#"+t).on("blur",function(){triggerBypassingHandler(e,"focus",wrapperFocusHandler)}),applyChildEvents(),$("#"+e).on("dblclick",on_dblclick),$("#"+e).on("mousemove",on_mousemove),$("#"+e).on("mouseenter",on_mouseover),$("#"+e).on("mouseleave",on_mouseout),$("#"+e).on("mousedown",on_mousedown),$("#"+e).on("mouseup",on_mouseup)},wrapperFocusHandler=function(){fireEventIfExist("focus")},wrapperBlurHandler=function(){fireEventIfExist("blur")},fixedForList=function(){var e=getPostID("postID"),t=getPostID("postChildID");if(isList===!0&&settings.enableCheckbox===!1)$("#"+e+" ."+css.ddTitle).hide(),$("#"+t).css({display:"block",position:"relative"});else{settings.enableCheckbox===!1&&(isMultiple=!1),$("#"+e+" ."+css.ddTitle).show(),$("#"+t).css({display:"none",position:"absolute"});var n=$("#"+t+" li."+css.selected)[0];$("#"+t+" li."+css.selected).removeClass(css.selected);var i=getIndex($(n).addClass(css.selected));setValue(i)}childHeight(childHeight())},fixedForDisabled=function(){{var e=getPostID("postID");1==isDisabled?settings.disabledOpacity:1}isDisabled===!0?$("#"+e).addClass(css.disabledAll):$("#"+e).removeClass(css.disabledAll)},fixedSomeUI=function(){var e=getPostID("postTitleTextID");"true"==settings.enableAutoFilter&&$("#"+e).on("keyup",applyFilters),fixedForList(),fixedForDisabled()},createLayout=function(){var e=createWrapper(),t=createTitle();e.appendChild(t);var n=createFilterBox();e.appendChild(n);var i=createChildren();e.appendChild(i),$("#"+element).after(e),hideOriginal(),fixedSomeUI(),applyEvents();var o=getPostID("postChildID");""!=settings.append&&$("#"+o).append(settings.append),""!=settings.prepend&&$("#"+o).prepend(settings.prepend),"function"==typeof settings.on.create&&settings.on.create.apply($this,arguments)},selectUI_LI=function(e){function t(e){$($("#"+n+" li."+css_i.li)[e]).addClass(css.selected),settings.enableCheckbox===!0&&$($("#"+n+" li."+css_i.li)[e]).find("input.checkbox").prop("checked","checked")}var n=getPostID("postChildID");if($("#"+n+" li."+css_i.li).removeClass(css.selected),settings.enableCheckbox===!0&&$("#"+n+" li."+css_i.li+" input.checkbox").prop("checked",!1),isArray(e)===!0)for(var i=0;i<e.length;i++)t(e[i]);else t(e)},selectMutipleOptions=function(e,t){for(var n=getPostID("postChildID"),i=e||$("#"+n+" li."+css.selected),o=0;o<i.length;o++){var s=t===!0?i[o]:getIndex(i[o]);getElement(element).options[s].selected="selected"}setValue(i)},fireAfterItemClicked=function(){var e=getPostID("postChildID"),t=$("#"+e+" li."+css.selected);(isMultiple&&(shiftHolded||controlHolded)||forcedTrigger)&&(getElement(element).selectedIndex=-1);var n;if(0==t.length?n=-1:t.length>1?selectMutipleOptions(t):n=getIndex($("#"+e+" li."+css.selected)),(getElement(element).selectedIndex!=n||forcedTrigger)&&t.length<=1){forcedTrigger=!1;{has_handler("change")}if(getElement(element).selectedIndex=n,setValue(n),"function"==typeof settings.on.change){var i=getDataAndUI();settings.on.change(i.data,i.ui)}$("#"+element).trigger("change")}},setValue=function(e,t){if(void 0!==e){var n,i,o;if(-1==e)n=-1,i="",o="",updateTitleUI(-1);else if("object"!=typeof e){var s=getElement(element).options[e];getElement(element).selectedIndex=e,n=e,i=parseOption(s),o=e>=0?getElement(element).options[e].text:"",updateTitleUI(void 0,i),i=i.value}else n=t&&t.index||getElement(element).selectedIndex,i=t&&t.value||getElement(element).value,o=t&&t.text||getElement(element).options[getElement(element).selectedIndex].text||"",updateTitleUI(n);updateProp("selectedIndex",n),updateProp("value",i),updateProp("selectedText",o),updateProp("children",getElement(element).children),updateProp("uiData",getDataAndUI()),updateProp("selectedOptions",$("#"+element+" option:selected"))}},has_handler=function(e){var t={byElement:!1,byJQuery:!1,hasEvent:!1},n=$("#"+element);try{null!==n.prop("on"+e)&&(t.hasEvent=!0,t.byElement=!0)}catch(i){}var o;return o="function"==typeof $._data?$._data(n[0],"events"):n.data("events"),o&&o[e]&&(t.hasEvent=!0,t.byJQuery=!0),t},bind_on_events=function(){unbind_on_events(),$("body").on("click",close),$(document).on("keydown",on_keydown),$(document).on("keyup",on_keyup)},unbind_on_events=function(){$("body").off("click",close),$(document).off("keydown",on_keydown),$(document).off("keyup",on_keyup)},applyFilters=function(e){if(e.keyCode<ALPHABETS_START&&e.keyCode!=BACKSPACE&&e.keyCode!=DELETE)return!1;var t=getPostID("postChildID"),n=getPostID("postTitleTextID"),i=getElement(n).value;if(0==i.length)$("#"+t+" li:hidden").show(),childHeight(childHeight());else{$("#"+t+" li").hide();var o=$("#"+t+" li:Contains('"+i+"')").show();$("#"+t+" li:visible").length<=settings.visibleRows&&childHeight(-1),(o.length>0&&!isList||!isMultiple)&&($("#"+t+" ."+css.selected).removeClass(css.selected),$(o[0]).addClass(css.selected))}isList||adjustOpen()},showFilterBox=function(){if("true"==settings.enableAutoFilter){var e=getPostID("postID"),t=getPostID("postTitleTextID");$("#"+t+":hidden").length>0&&0==controlHolded&&($("#"+t+":hidden").show().val(""),triggerBypassingHandler(e,"blur",wrapperBlurHandler),getElement(t).focus())}},hideFilterBox=function(){var e=getPostID("postTitleTextID");$("#"+e+":visible").length>0&&($("#"+e+":visible").hide(),getElement(e).blur())},on_keydown=function(e){var t=(getPostID("postTitleTextID"),getPostID("postChildID"));switch(e.keyCode){case DOWN_ARROW:case RIGHT_ARROW:e.preventDefault(),e.stopPropagation(),next();break;case UP_ARROW:case LEFT_ARROW:e.preventDefault(),e.stopPropagation(),previous();break;case ESCAPE:case ENTER:e.preventDefault(),e.stopPropagation(),close();var n=$("#"+t+" li."+css.selected).length;forcedTrigger=oldSelected.length!=n||0==n?!0:!1,fireAfterItemClicked(),unbind_on_events(),lastTarget=null;break;case SHIFT:shiftHolded=!0;break;case CONTROL:controlHolded=!0;break;default:e.keyCode>=ALPHABETS_START&&isList===!1&&showFilterBox()}return isDisabled===!0?!1:(fireEventIfExist("keydown"),void 0)},on_keyup=function(e){switch(e.keyCode){case SHIFT:shiftHolded=!1;break;case CONTROL:controlHolded=!1}return isDisabled===!0?!1:(fireEventIfExist("keyup"),void 0)},on_dblclick=function(){return isDisabled===!0?!1:(fireEventIfExist("dblclick"),void 0)},on_mousemove=function(){return isDisabled===!0?!1:(fireEventIfExist("mousemove"),void 0)},on_mouseover=function(e){return isDisabled===!0?!1:(e.preventDefault(),fireEventIfExist("mouseover"),void 0)},on_mouseout=function(e){return isDisabled===!0?!1:(e.preventDefault(),fireEventIfExist("mouseout"),void 0)},on_mousedown=function(){return isDisabled===!0?!1:(fireEventIfExist("mousedown"),void 0)},on_mouseup=function(){return isDisabled===!0?!1:(fireEventIfExist("mouseup"),void 0)},option_has_handler=function(e,t){var n={byElement:!1,byJQuery:!1,hasEvent:!1};void 0!=$(e).prop("on"+t)&&(n.hasEvent=!0,n.byElement=!0);var i=$(e).data("events");return i&&i[t]&&(n.hasEvent=!0,n.byJQuery=!0),n},fireOptionEventIfExist=function(e,t){if(0==settings.disabledOptionEvents){var n=getElement(element).options[getIndex(e)];if(option_has_handler(n,t).hasEvent===!0){if(option_has_handler(n,t).byElement===!0&&n["on"+t](),option_has_handler(n,t).byJQuery===!0)switch(t){case"keydown":case"keyup":break;default:$(n).trigger(t)}return!1}}},fireEventIfExist=function(e){if("function"==typeof settings.on[e]&&settings.on[e].apply(this,arguments),has_handler(e).hasEvent===!0){if(has_handler(e).byElement===!0)getElement(element)["on"+e]();else if(has_handler(e).byJQuery===!0)switch(e){case"keydown":case"keyup":break;default:$("#"+element).triggerHandler(e)}return!1}},scrollToIfNeeded=function(e){var t=getPostID("postChildID");if(e=void 0!==e?e:$("#"+t+" li."+css.selected),e.length>0){var n=parseInt($(e).position().top),i=parseInt($("#"+t).height());if(n>i){var o=n+$("#"+t).scrollTop()-i/2;$("#"+t).animate({scrollTop:o},500)}}},next=function(){function e(t){return t+=1,t>n.length?t:$(n[t]).hasClass(css.enabled)===!0?t:t=e(t)}var t=getPostID("postChildID"),n=$("#"+t+" li:visible."+css_i.li),i=$("#"+t+" li:visible."+css.selected);i=0==i.length?n[0]:i;var o=$("#"+t+" li:visible."+css_i.li).index(i);o<n.length-1&&(o=e(o),o<n.length&&(shiftHolded&&isList&&isMultiple||$("#"+t+" ."+css.selected).removeClass(css.selected),$(n[o]).addClass(css.selected),updateTitleUI(o),1==isList&&fireAfterItemClicked(),scrollToIfNeeded($(n[o]))),isList||adjustOpen())},previous=function(){function e(t){return t-=1,0>t?t:$(i[t]).hasClass(css.enabled)===!0?t:t=e(t)}var t=getPostID("postChildID"),n=$("#"+t+" li:visible."+css.selected),i=$("#"+t+" li:visible."+css_i.li),o=$("#"+t+" li:visible."+css_i.li).index(n[0]);if(o>=0){if(o=e(o),o>=0&&(shiftHolded&&isList&&isMultiple||$("#"+t+" ."+css.selected).removeClass(css.selected),$(i[o]).addClass(css.selected),updateTitleUI(o),1==isList&&fireAfterItemClicked(),parseInt($(i[o]).position().top+$(i[o]).height())<=0)){var s=$("#"+t).scrollTop()-$("#"+t).height()-$(i[o]).height();$("#"+t).animate({scrollTop:s},500)}isList||adjustOpen()}},adjustOpen=function(){var e=getPostID("postID"),t=getPostID("postChildID"),n=$("#"+e).offset(),i=$("#"+e).height(),o=$(window).height(),s=$(window).scrollTop(),r=$("#"+t).height(),a=$("#"+e).height(),l=settings.openDirection.toLowerCase();if((o+s<Math.floor(r+i+n.top)||"alwaysup"==l)&&"alwaysdown"!=l){a=r,$("#"+t).css({top:"-"+a+"px",display:"block",zIndex:settings.zIndex}),"true"==settings.roundedCorner&&$("#"+e).removeClass("borderRadius borderRadiusTp").addClass("borderRadiusBtm");var a=$("#"+t).offset().top;-10>a&&($("#"+t).css({top:parseInt($("#"+t).css("top"))-a+20+s+"px",zIndex:settings.zIndex}),"true"==settings.roundedCorner&&$("#"+e).removeClass("borderRadiusBtm borderRadiusTp").addClass("borderRadius"))}else $("#"+t).css({top:a+"px",zIndex:settings.zIndex}),"true"==settings.roundedCorner&&$("#"+e).removeClass("borderRadius borderRadiusBtm").addClass("borderRadiusTp");isIE&&msieversion()<=7&&($("div.ddcommon").css("zIndex",settings.zIndex-10),$("#"+e).css("zIndex",settings.zIndex+5))},open=function(){if(isDisabled===!0)return!1;var e=(getPostID("postID"),getPostID("postChildID"));if(isOpen)"mouseover"!==settings.event&&close();else{isOpen=!0,""!=msBeautify.oldDiv&&$("#"+msBeautify.oldDiv).css({display:"none"}),msBeautify.oldDiv=e,$("#"+e+" li:hidden").show(),adjustOpen();var t=settings.animStyle;if(""==t||"none"==t){if($("#"+e).css({display:"block"}),scrollToIfNeeded(),"function"==typeof settings.on.open){var n=getDataAndUI();settings.on.open(n.data,n.ui)}}else $("#"+e)[t]("fast",function(){if(scrollToIfNeeded(),"function"==typeof settings.on.open){var e=getDataAndUI();settings.on.open(e.data,e.ui)}});bind_on_events()}},close=function(){isOpen=!1;var e=getPostID("postID"),t=getPostID("postChildID");if((isList===!1||settings.enableCheckbox===!0)&&($("#"+t).css({display:"none"}),"true"==settings.roundedCorner&&$("#"+e).removeClass("borderRadiusTp borderRadiusBtm").addClass("borderRadius")),unbind_on_events(),"function"==typeof settings.on.close){var n=getDataAndUI();settings.on.close(n.data,n.ui)}hideFilterBox(),childHeight(childHeight()),$("#"+t).css({zIndex:1}),updateTitleUI(getElement(element).selectedIndex)},mergeAllProp=function(){try{orginial=$.extend(!0,{},getElement(element));for(var e in orginial)"function"!=typeof orginial[e]&&($this[e]=orginial[e])}catch(t){}$this.selectedText=getElement(element).selectedIndex>=0?getElement(element).options[getElement(element).selectedIndex].text:"",$this.version=msBeautify.version.msDropdown,$this.author=msBeautify.author},getDataAndUIByOption=function(e){if(null!=e&&"undefined"!=typeof e){var t=getPostID("postChildID"),n=parseOption(e),i=$("#"+t+" li."+css_i.li+":eq("+e.index+")");return{data:n,ui:i,option:e,index:e.index}}return null},getDataAndUI=function(){var e,t,n,i,o=getPostID("postChildID"),s=getElement(element);if(-1==s.selectedIndex)e=null,t=null,n=null,i=-1;else if(t=$("#"+o+" li."+css.selected),t.length>1){for(var r=[],a=[],l=0;l<t.length;l++){var c=getIndex(t[l]);r.push(c),a.push(s.options[c])}e=r,n=a,i=r}else n=s.options[s.selectedIndex],e=parseOption(n),i=s.selectedIndex;return{data:e,ui:t,index:i,option:n}},updateTitleUI=function(e,t){var n=getPostID("postTitleID"),i={};if(-1==e)i.text="&nbsp;",i.className="",i.description="",i.image="";else if("undefined"!=typeof e){var o=getElement(element).options[e];i=parseOption(o)}else i=t;$("#"+n).find("."+css.label).html(i.text),getElement(n).className=css.ddTitleText+" "+i.className,""!=i.description?$("#"+n).find("."+css.description).html(i.description).show():$("#"+n).find("."+css.description).html("").hide();var s=$("#"+n).find("img");s.length>0&&$(s).remove(),""!=i.image&&settings.showIcon&&(s=createElement("img",{src:i.image}),$("#"+n).prepend(s),""!=i.imagecss&&(s.className=i.imagecss+" "),""==i.description&&(s.className=s.className+css_i.fnone))},updateProp=function(e,t){$this[e]=t},updateUI=function(e,t,n){var i=getPostID("postChildID"),o=!1;switch(e){case"add":var s,r=createChild(t||getElement(element).options[n]);if(s=3==arguments.length?n:$("#"+i+" li."+css_i.li).length-1,0>s||!s)$("#"+i+" ul").append(r);else{var a=$("#"+i+" li."+css_i.li)[s];$(a).before(r)}removeChildEvents(),applyChildEvents(),null!=settings.on.add&&settings.on.add.apply(this,arguments);break;case"remove":o=$($("#"+i+" li."+css_i.li)[n]).hasClass(css.selected),$("#"+i+" li."+css_i.li+":eq("+n+")").remove();var l=$("#"+i+" li."+css.enabled);if(1==o&&l.length>0){$(l[0]).addClass(css.selected);var c=$("#"+i+" li."+css_i.li).index(l[0]);setValue(c)}0==l.length&&setValue(-1),$("#"+i+" li."+css_i.li).length<settings.visibleRows&&!isList&&childHeight(-1),null!=settings.on.remove&&settings.on.remove.apply(this,arguments)}};this.act=function(){var e=arguments[0];switch(Array.prototype.shift.call(arguments),e){case"add":$this.add.apply(this,arguments);break;case"remove":$this.remove.apply(this,arguments);break;default:try{getElement(element)[e].apply(getElement(element),arguments)}catch(t){}}},this.add=function(){var e,t,n,i,o,s=arguments[0];"string"==typeof s?(e=s,t=e,opt=new Option(e,t)):(e=s.text||"",t=s.value||e,n=s.title||"",i=s.image||"",o=s.description||"",opt=new Option(e,t),$(opt).data("description",o),$(opt).data("image",i),$(opt).data("title",n)),arguments[0]=opt,getElement(element).add.apply(getElement(element),arguments),updateProp("children",getElement(element).children),updateProp("length",getElement(element).length),updateUI("add",opt,arguments[1])},this.remove=function(e){getElement(element).remove(e),updateProp("children",getElement(element).children),updateProp("length",getElement(element).length),updateUI("remove",void 0,e)},this.set=function(e,t){if("undefined"==typeof e||"undefined"==typeof t)return!1;e=e.toString();try{updateProp(e,t)}catch(n){}switch(e){case"size":getElement(element)[e]=t,0==t&&(getElement(element).multiple=!1),isList=getElement(element).size>1||1==getElement(element).multiple?!0:!1,fixedForList();break;case"multiple":getElement(element)[e]=t,isList=getElement(element).size>1||1==getElement(element).multiple?!0:!1,isMultiple=getElement(element).multiple,fixedForList(),updateProp(e,t);break;case"disabled":getElement(element)[e]=t,isDisabled=t,fixedForDisabled();break;case"selectedIndex":case"value":"selectedIndex"==e&&isArray(t)===!0?($("#"+element+" option").prop("selected",!1),selectMutipleOptions(t,!0),selectUI_LI(t)):(getElement(element)[e]=t,selectUI_LI(getElement(element).selectedIndex),setValue(getElement(element).selectedIndex));break;case"length":var i=getPostID("postChildID");t<getElement(element).length&&(getElement(element)[e]=t,0==t?($("#"+i+" li."+css_i.li).remove(),setValue(-1)):($("#"+i+" li."+css_i.li+":gt("+(t-1)+")").remove(),0==$("#"+i+" li."+css.selected).length&&$("#"+i+" li."+css.enabled+":eq(0)").addClass(css.selected)),updateProp(e,t),updateProp("children",getElement(element).children));break;case"id":break;default:try{getElement(element)[e]=t,updateProp(e,t)}catch(n){}}},this.get=function(e){return $this[e]||getElement(element)[e]},this.visible=function(e){var t=getPostID("postID");if(e===!0)$("#"+t).show();else{if(e!==!1)return"none"==$("#"+t).css("display")?!1:!0;$("#"+t).hide()}},this.debug=function(e){msBeautify.debug(e)},this.close=function(){close()},this.open=function(){open()},this.showRows=function(e){return"undefined"==typeof e||0==e?!1:(settings.visibleRows=e,childHeight(childHeight()),void 0)},this.visibleRows=this.showRows,this.on=function(e,t){$("#"+element).on(e,t)},this.off=function(e,t){$("#"+element).off(e,t)},this.addMyEvent=this.on,this.getData=function(){return getDataAndUI()},this.namedItem=function(){var e=getElement(element).namedItem.apply(getElement(element),arguments);return getDataAndUIByOption(e)},this.item=function(){var e=getElement(element).item.apply(getElement(element),arguments);return getDataAndUIByOption(e)},this.setIndexByValue=function(e){this.set("value",e)},this.destroy=function(){var e=(getPostID("postElementHolder"),getPostID("postID"));$("#"+e+", #"+e+" *").off(),getElement(element).tabIndex=getElement(e).tabIndex,$("#"+e).remove(),$("#"+element).parent().replaceWith($("#"+element)),$("#"+element).data("dd",null)},this.refresh=function(){setValue(getElement(element).selectedIndex)},init()}msBeautify={version:{msDropdown:"3.5.2"},author:"Marghoob Suleman",counter:20,debug:function(e){e!==!1?$(".ddOutOfVision").css({height:"auto",position:"relative"}):$(".ddOutOfVision").css({height:"0px",position:"absolute"})
},oldDiv:"",create:function(e,t,n){n=n||"dropdown";var i;switch(n.toLowerCase()){case"dropdown":case"select":i=$(e).msDropdown(t).data("dd")}return i}},$.msDropDown={},$.msDropdown={},$.extend(!0,$.msDropDown,msBeautify),$.extend(!0,$.msDropdown,msBeautify),void 0===$.fn.prop&&($.fn.prop=$.fn.attr),void 0===$.fn.on&&($.fn.on=$.fn.bind,$.fn.off=$.fn.unbind),$.expr[":"].Contains="function"==typeof $.expr.createPseudo?$.expr.createPseudo(function(e){return function(t){return $(t).text().toUpperCase().indexOf(e.toUpperCase())>=0}}):function(e,t,n){return $(e).text().toUpperCase().indexOf(n[3].toUpperCase())>=0},$.fn.extend({msDropDown:function(e){return this.each(function(){if(!$(this).data("dd")){var t=new dd(this,e);$(this).data("dd",t)}})}}),$.fn.msDropdown=$.fn.msDropDown}(jQuery);